# 01.5 Git Essencial para Desenvolvimento [B√ÅSICO] üåø

## üéØ Objetivo

Dominar **Git** para **controle de vers√£o**, **colabora√ß√£o em equipe**, **branching strategies**, **resolu√ß√£o de conflitos** e **boas pr√°ticas** essenciais para desenvolvimento profissional.

---

## üìö O que √© Git?

**Git** √© um **sistema de controle de vers√£o distribu√≠do** que permite:

- ‚úÖ Rastrear mudan√ßas no c√≥digo
- ‚úÖ Trabalhar em branches paralelos
- ‚úÖ Colaborar com equipe
- ‚úÖ Reverter mudan√ßas indesejadas
- ‚úÖ Manter hist√≥rico completo do projeto

---

## üèóÔ∏è Instala√ß√£o e Configura√ß√£o

### Instala√ß√£o

```bash
# Windows (via Chocolatey)
choco install git

# macOS (via Homebrew)
brew install git

# Linux (Ubuntu/Debian)
sudo apt-get install git

# Verificar instala√ß√£o
git --version
```

### Configura√ß√£o Inicial

```bash
# Configurar nome e email (obrigat√≥rio)
git config --global user.name "Seu Nome"
git config --global user.email "seu.email@exemplo.com"

# Configurar editor padr√£o
git config --global core.editor "code --wait"  # VS Code
git config --global core.editor "vim"           # Vim

# Configurar linha de comando colorida
git config --global color.ui auto

# Configurar push behavior
git config --global push.default simple

# Listar todas as configura√ß√µes
git config --list

# Ver configura√ß√£o espec√≠fica
git config user.name
```

---

## üìù Comandos B√°sicos

### Inicializar Reposit√≥rio

```bash
# Criar novo reposit√≥rio
git init

# Clonar reposit√≥rio existente
git clone https://github.com/usuario/repositorio.git

# Clonar em diret√≥rio espec√≠fico
git clone https://github.com/usuario/repositorio.git meu-projeto
```

### Status e Informa√ß√µes

```bash
# Ver status do reposit√≥rio (arquivos modificados, staged, etc)
git status

# Status resumido (compacto)
git status -s

# Ver hist√≥rico de commits
git log

# Log resumido (uma linha por commit)
git log --oneline

# Log com gr√°fico de branches
git log --oneline --graph --all

# Ver √∫ltimos 5 commits
git log -5

# Ver commits de autor espec√≠fico
git log --author="Jo√£o Silva"

# Ver commits por data
git log --since="2024-01-01" --until="2024-12-31"

# Ver diferen√ßas
git diff              # Mudan√ßas n√£o staged
git diff --staged     # Mudan√ßas staged
git diff HEAD         # Todas as mudan√ßas
```

### Adicionar e Commitar

```bash
# Adicionar arquivo espec√≠fico ao staging
git add arquivo.txt

# Adicionar m√∫ltiplos arquivos
git add arquivo1.txt arquivo2.txt

# Adicionar todos os arquivos modificados
git add .
git add -A

# Adicionar arquivos de um tipo espec√≠fico
git add *.java

# Commitar com mensagem
git commit -m "feat: adiciona funcionalidade de login"

# Adicionar e commitar em um comando
git commit -am "fix: corrige valida√ß√£o de email"

# Commit com editor (mensagem multi-linha)
git commit

# Alterar √∫ltimo commit (adicionar mudan√ßas ou corrigir mensagem)
git commit --amend
git commit --amend -m "Nova mensagem"
```

---

## üåø Trabalhando com Branches

### Criar e Navegar

```bash
# Listar branches
git branch              # Branches locais
git branch -r           # Branches remotos
git branch -a           # Todos os branches

# Criar novo branch
git branch feature/nova-funcionalidade

# Criar e mudar para novo branch
git checkout -b feature/nova-funcionalidade

# Mudar para branch existente
git checkout main
git switch main  # Comando mais moderno

# Criar branch a partir de commit espec√≠fico
git checkout -b hotfix/bug-123 abc1234

# Renomear branch atual
git branch -m novo-nome

# Deletar branch local
git branch -d feature/concluida      # Safe delete (s√≥ se merged)
git branch -D feature/abandonada     # Force delete
```

### Merge e Rebase

```bash
# Merge: trazer mudan√ßas de outro branch
git checkout main
git merge feature/nova-funcionalidade

# Merge com mensagem customizada
git merge feature/nova-funcionalidade -m "Merge feature X"

# Abortar merge em caso de conflito
git merge --abort

# Rebase: reescrever hist√≥rico (use com cuidado!)
git checkout feature/minha-feature
git rebase main

# Rebase interativo (editar, squash, reorder commits)
git rebase -i HEAD~3  # √öltimos 3 commits

# Continuar rebase ap√≥s resolver conflitos
git rebase --continue

# Abortar rebase
git rebase --abort
```

---

## üîÑ Trabalhando com Remoto

### Configurar Remote

```bash
# Adicionar remote
git remote add origin https://github.com/usuario/repositorio.git

# Listar remotes
git remote -v

# Ver detalhes de remote
git remote show origin

# Renomear remote
git remote rename origin upstream

# Remover remote
git remote remove origin

# Alterar URL do remote
git remote set-url origin https://github.com/usuario/novo-repositorio.git
```

### Push e Pull

```bash
# Push para remote (enviar commits)
git push origin main

# Push de branch pela primeira vez (cria no remote)
git push -u origin feature/nova-funcionalidade

# Push for√ßado (reescreve hist√≥rico - CUIDADO!)
git push --force origin main
git push --force-with-lease origin main  # Mais seguro

# Pull: buscar e fazer merge de mudan√ßas remotas
git pull origin main

# Pull com rebase (evita merge commits)
git pull --rebase origin main

# Fetch: apenas buscar mudan√ßas (sem merge)
git fetch origin

# Fetch de todos os remotes
git fetch --all

# Ver branches remotos ap√≥s fetch
git branch -r
```

---

## üîç Desfazendo Mudan√ßas

### Reverter Modifica√ß√µes

```bash
# Descartar mudan√ßas em arquivo (unstaged)
git checkout -- arquivo.txt
git restore arquivo.txt  # Comando moderno

# Descartar todas as mudan√ßas n√£o staged
git checkout -- .
git restore .

# Remover arquivo do staging (unstage)
git reset HEAD arquivo.txt
git restore --staged arquivo.txt  # Comando moderno

# Reverter √∫ltimo commit (mant√©m mudan√ßas)
git reset --soft HEAD~1

# Reverter √∫ltimo commit (descarta mudan√ßas)
git reset --hard HEAD~1

# Reverter commit espec√≠fico (cria novo commit de revers√£o)
git revert abc1234

# Limpar arquivos n√£o rastreados
git clean -n   # Dry-run (mostra o que seria deletado)
git clean -f   # Deleta arquivos n√£o rastreados
git clean -fd  # Deleta arquivos e diret√≥rios
```

---

## üö® Resolu√ß√£o de Conflitos

### Conflito de Merge

```bash
# Durante merge, Git para e mostra conflitos
git merge feature/outra-branch

# Ver arquivos com conflito
git status

# Arquivo com conflito ter√° marcadores:
# <<<<<<< HEAD
# C√≥digo do branch atual
# =======
# C√≥digo do branch sendo merged
# >>>>>>> feature/outra-branch

# Resolver manualmente (editar arquivo, remover marcadores)

# Ap√≥s resolver, adicionar arquivo
git add arquivo-resolvido.txt

# Completar merge
git commit
```

### Ferramentas de Merge

```bash
# Usar ferramenta visual de merge
git mergetool

# Configurar VS Code como mergetool
git config --global merge.tool vscode
git config --global mergetool.vscode.cmd 'code --wait $MERGED'

# Abortar merge e voltar ao estado anterior
git merge --abort
```

---

## üè∑Ô∏è Tags

### Criar e Gerenciar Tags

```bash
# Criar tag leve (lightweight)
git tag v1.0.0

# Criar tag anotada (recomendado)
git tag -a v1.0.0 -m "Release 1.0.0"

# Listar tags
git tag

# Ver detalhes de tag
git show v1.0.0

# Push de tag para remote
git push origin v1.0.0

# Push de todas as tags
git push origin --tags

# Deletar tag local
git tag -d v1.0.0

# Deletar tag remota
git push origin --delete v1.0.0

# Checkout de tag (detached HEAD)
git checkout v1.0.0

# Criar branch a partir de tag
git checkout -b hotfix/v1.0.1 v1.0.0
```

---

## üì¶ Stash - Armazenamento Tempor√°rio

### Usar Stash

```bash
# Salvar mudan√ßas temporariamente
git stash

# Stash com mensagem descritiva
git stash save "WIP: implementando login"

# Listar stashes
git stash list

# Aplicar √∫ltimo stash (mant√©m stash)
git stash apply

# Aplicar stash espec√≠fico
git stash apply stash@{2}

# Aplicar e remover √∫ltimo stash
git stash pop

# Remover √∫ltimo stash
git stash drop

# Remover stash espec√≠fico
git stash drop stash@{1}

# Limpar todos os stashes
git stash clear

# Ver mudan√ßas em stash
git stash show
git stash show -p  # Com diff completo
```

---

## üîÑ Branching Strategies

### Git Flow

```
main (produ√ß√£o)
  ‚îî‚îÄ develop (desenvolvimento)
      ‚îú‚îÄ feature/nova-funcionalidade
      ‚îú‚îÄ feature/outra-funcionalidade
      ‚îî‚îÄ release/v1.2.0
  ‚îî‚îÄ hotfix/bug-critico
```

```bash
# Feature branch
git checkout -b feature/login develop
# ... desenvolver ...
git checkout develop
git merge --no-ff feature/login

# Release branch
git checkout -b release/1.0.0 develop
# ... ajustes finais ...
git checkout main
git merge --no-ff release/1.0.0
git tag -a v1.0.0

# Hotfix
git checkout -b hotfix/bug-123 main
# ... corrigir bug ...
git checkout main
git merge --no-ff hotfix/bug-123
git tag -a v1.0.1
git checkout develop
git merge --no-ff hotfix/bug-123
```

### GitHub Flow (Simplificado)

```
main (produ√ß√£o)
  ‚îú‚îÄ feature/nova-funcionalidade
  ‚îú‚îÄ fix/bug-123
  ‚îî‚îÄ docs/atualiza-readme
```

```bash
# Criar branch de feature
git checkout -b feature/nova-funcionalidade main

# Desenvolver e commitar
git add .
git commit -m "feat: implementa nova funcionalidade"

# Push e criar Pull Request
git push -u origin feature/nova-funcionalidade

# Ap√≥s PR aprovado, merge no GitHub
# Pull main atualizado
git checkout main
git pull origin main
```

---

## üîç Comandos Avan√ßados

### Log Avan√ßado

```bash
# Log com estat√≠sticas de mudan√ßas
git log --stat

# Log com patch (diff de cada commit)
git log -p

# Log de arquivo espec√≠fico
git log -- arquivo.txt

# Log com busca em mensagens
git log --grep="fix"

# Log com busca em c√≥digo
git log -S"fun√ß√£o_antiga"

# Log formatado customizado
git log --pretty=format:"%h - %an, %ar : %s"

# Log com decorators (tags, branches)
git log --oneline --decorate --graph --all
```

### Blame e Bisect

```bash
# Ver quem modificou cada linha (blame)
git blame arquivo.txt

# Blame com range de linhas
git blame -L 10,20 arquivo.txt

# Bisect: encontrar commit que introduziu bug
git bisect start
git bisect bad                 # Commit atual √© ruim
git bisect good v1.0.0        # Tag v1.0.0 era boa
# Git faz checkout de commit no meio
# Testar e marcar:
git bisect good  # ou git bisect bad
# Repetir at√© encontrar commit problem√°tico
git bisect reset  # Finalizar bisect
```

### Cherry-pick

```bash
# Aplicar commit espec√≠fico de outro branch
git cherry-pick abc1234

# Cherry-pick de m√∫ltiplos commits
git cherry-pick abc1234 def5678

# Cherry-pick sem commitar (staging apenas)
git cherry-pick --no-commit abc1234
```

---

## üìã .gitignore

### Criar .gitignore

```gitignore
# .gitignore para Java/Spring Boot

# Compiled classes
*.class
target/
build/
out/

# IDE
.idea/
*.iml
.vscode/
*.swp
*.swo

# OS
.DS_Store
Thumbs.db

# Logs
*.log
logs/

# Environment
.env
.env.local
application-local.yml

# Dependencies
node_modules/

# Maven
.mvn/
mvnw
mvnw.cmd

# Gradle
.gradle/
gradle/
gradlew
gradlew.bat
```

### Comandos .gitignore

```bash
# Remover arquivo que j√° estava tracked
git rm --cached arquivo.txt

# Remover diret√≥rio recursivamente
git rm -r --cached target/

# Ver arquivos ignorados
git status --ignored

# Verificar se arquivo est√° sendo ignorado
git check-ignore -v arquivo.txt
```

---

## üîê Git com SSH

### Configurar SSH

```bash
# Gerar chave SSH
ssh-keygen -t ed25519 -C "seu.email@exemplo.com"

# Adicionar chave ao ssh-agent
eval "$(ssh-agent -s)"
ssh-add ~/.ssh/id_ed25519

# Copiar chave p√∫blica (adicionar no GitHub/GitLab)
cat ~/.ssh/id_ed25519.pub

# Testar conex√£o
ssh -T git@github.com

# Usar SSH URL
git remote set-url origin git@github.com:usuario/repositorio.git
```

---

## üìù Conventional Commits

### Formato

```
<tipo>[escopo opcional]: <descri√ß√£o>

[corpo opcional]

[rodap√©(s) opcional(is)]
```

### Tipos Comuns

```bash
# Feature
git commit -m "feat: adiciona autentica√ß√£o JWT"
git commit -m "feat(auth): implementa refresh token"

# Bug fix
git commit -m "fix: corrige valida√ß√£o de email"
git commit -m "fix(user): resolve NullPointerException no cadastro"

# Documentation
git commit -m "docs: atualiza README com instru√ß√µes de deploy"

# Style
git commit -m "style: formata c√≥digo com Prettier"

# Refactor
git commit -m "refactor: extrai l√≥gica de valida√ß√£o para service"

# Performance
git commit -m "perf: otimiza query de busca de usu√°rios"

# Test
git commit -m "test: adiciona testes para UserService"

# Chore
git commit -m "chore: atualiza depend√™ncias do projeto"

# Build
git commit -m "build: configura Docker para produ√ß√£o"

# CI
git commit -m "ci: adiciona workflow de testes no GitHub Actions"

# Breaking change
git commit -m "feat!: remove endpoint legado de autentica√ß√£o

BREAKING CHANGE: endpoint /auth/login removido, usar /api/v2/auth"
```

---

## üõ†Ô∏è Aliases √öteis

### Configurar Aliases

```bash
# Aliases de log
git config --global alias.lg "log --oneline --graph --all --decorate"
git config --global alias.last "log -1 HEAD"

# Aliases de status
git config --global alias.st "status -s"
git config --global alias.unstage "reset HEAD --"

# Aliases de branch
git config --global alias.br "branch"
git config --global alias.co "checkout"
git config --global alias.cob "checkout -b"

# Aliases de commit
git config --global alias.cm "commit -m"
git config --global alias.ca "commit -am"
git config --global alias.amend "commit --amend --no-edit"

# Usar aliases
git lg
git st
git cob feature/nova-branch
```

---

## üö® Comandos de Emerg√™ncia

### Recupera√ß√£o

```bash
# Recuperar commit deletado (via reflog)
git reflog
git checkout abc1234  # Hash do commit no reflog

# Recuperar branch deletado
git reflog
git checkout -b branch-recuperado abc1234

# Desfazer rebase desastroso
git reflog
git reset --hard HEAD@{5}  # Volta para estado antes do rebase

# Recuperar arquivo deletado
git checkout HEAD -- arquivo.txt

# Limpar reposit√≥rio (CUIDADO!)
git clean -fdx  # Remove tudo n√£o tracked (inclusive ignored)
```

---

## üìä Estat√≠sticas e Relat√≥rios

```bash
# Commits por autor
git shortlog -sn

# Estat√≠sticas gerais
git log --stat

# Total de linhas por autor
git log --author="Jo√£o Silva" --pretty=tformat: --numstat | \
  awk '{ add += $1; subs += $2; loc += $1 - $2 } END \
  { printf "added lines: %s removed lines: %s total lines: %s\n", add, subs, loc }'

# Arquivos mais modificados
git log --pretty=format: --name-only | sort | uniq -c | sort -rg | head -10

# Ver tamanho do reposit√≥rio
git count-objects -vH
```

---

## üìã Boas Pr√°ticas

### ‚úÖ Recomenda√ß√µes

```bash
# ‚úÖ Commits pequenos e frequentes
git commit -m "feat: adiciona valida√ß√£o de email"

# ‚úÖ Mensagens descritivas
git commit -m "fix: corrige NullPointerException no login quando email vazio"

# ‚úÖ Pull antes de push
git pull --rebase origin main
git push origin main

# ‚úÖ Usar branches para features
git checkout -b feature/nova-funcionalidade

# ‚úÖ .gitignore desde o in√≠cio
# N√£o commitar arquivos IDE, logs, secrets

# ‚úÖ Revisar mudan√ßas antes de commitar
git diff
git status
git add -p  # Stage interativo

# ‚úÖ Usar SSH para remotes
git remote set-url origin git@github.com:usuario/repo.git

# ‚úÖ Proteger branch main
# Configurar no GitHub: Settings ‚Üí Branches ‚Üí Branch protection rules

# ‚úÖ Code review via Pull Requests
# Sempre criar PR, nunca push direto em main
```

### ‚ùå Anti-Patterns

```bash
# ‚ùå Commits gigantes
git add .
git commit -m "atualiza√ß√£o"

# ‚úÖ Commits at√¥micos
git add feature.java
git commit -m "feat: implementa funcionalidade X"

# ‚ùå Mensagens gen√©ricas
git commit -m "fix"
git commit -m "wip"
git commit -m "mudan√ßas"

# ‚úÖ Mensagens descritivas
git commit -m "fix: corrige valida√ß√£o de CPF no cadastro"

# ‚ùå Commitar c√≥digo quebrado
# Testes falhando, c√≥digo n√£o compila

# ‚úÖ Sempre validar antes
mvn test
git commit -m "feat: nova funcionalidade"

# ‚ùå Push --force em branch compartilhado
git push --force origin main  # ‚ùå Perigoso!

# ‚úÖ Force com lease ou criar novo branch
git push --force-with-lease origin main

# ‚ùå Commitar secrets
git add application.yml  # ‚ùå Cont√©m passwords

# ‚úÖ Usar .env e .gitignore
echo "application-local.yml" >> .gitignore

# ‚ùå Branches de longa dura√ß√£o
# Feature branch aberto por meses

# ‚úÖ Integrar frequentemente
# Merge/rebase com main regularmente
```

---

## üéØ Workflows Comuns

### Workflow: Nova Feature

```bash
# 1. Atualizar main
git checkout main
git pull origin main

# 2. Criar branch de feature
git checkout -b feature/login

# 3. Desenvolver
# ... editar arquivos ...
git add .
git commit -m "feat: implementa tela de login"

# 4. Push para remote
git push -u origin feature/login

# 5. Criar Pull Request no GitHub/GitLab

# 6. Ap√≥s aprova√ß√£o, merge e cleanup
git checkout main
git pull origin main
git branch -d feature/login
```

### Workflow: Hotfix em Produ√ß√£o

```bash
# 1. Criar branch de hotfix a partir de main
git checkout -b hotfix/bug-critico main

# 2. Corrigir bug
# ... editar arquivos ...
git commit -am "fix: corrige bug cr√≠tico de seguran√ßa"

# 3. Merge em main e tag
git checkout main
git merge --no-ff hotfix/bug-critico
git tag -a v1.0.1 -m "Hotfix: bug de seguran√ßa"
git push origin main --tags

# 4. Merge em develop tamb√©m
git checkout develop
git merge --no-ff hotfix/bug-critico
git push origin develop

# 5. Cleanup
git branch -d hotfix/bug-critico
```

---

## üîç Troubleshooting

### Problemas Comuns

```bash
# Problema: "Permission denied (publickey)"
# Solu√ß√£o: Configurar SSH corretamente
ssh-add ~/.ssh/id_ed25519
ssh -T git@github.com

# Problema: "fatal: refusing to merge unrelated histories"
# Solu√ß√£o:
git pull origin main --allow-unrelated-histories

# Problema: "Your branch and 'origin/main' have diverged"
# Solu√ß√£o: Rebase ou merge
git pull --rebase origin main

# Problema: Arquivo grande commitado por engano
# Solu√ß√£o: Usar BFG Repo-Cleaner ou git filter-branch
java -jar bfg.jar --delete-files arquivo-grande.zip
git reflog expire --expire=now --all
git gc --prune=now --aggressive

# Problema: Commit no branch errado
# Solu√ß√£o: Cherry-pick para branch correto
git checkout branch-correto
git cherry-pick abc1234
git checkout branch-errado
git reset --hard HEAD~1
```

---

## üìö Recursos Adicionais

### Links √öteis

- üìñ [Git Documentation](https://git-scm.com/doc)
- üìñ [Pro Git Book](https://git-scm.com/book/en/v2)
- üéì [Learn Git Branching](https://learngitbranching.js.org/)
- üìù [Conventional Commits](https://www.conventionalcommits.org/)
- üîç [Oh Shit, Git!?!](https://ohshitgit.com/)

### Cheat Sheets

```bash
# Baixar cheat sheet oficial
curl https://training.github.com/downloads/github-git-cheat-sheet.pdf -o git-cheatsheet.pdf
```

---

## üìù Resumo

**Git** √© essencial para:

- ‚úÖ **Controle de vers√£o**: Rastrear mudan√ßas no c√≥digo
- ‚úÖ **Colabora√ß√£o**: Trabalhar em equipe sem conflitos
- ‚úÖ **Branching**: Desenvolver features isoladamente
- ‚úÖ **Hist√≥rico**: Reverter mudan√ßas, encontrar bugs
- ‚úÖ **Workflow**: Git Flow, GitHub Flow, Trunk-Based
- ‚úÖ **Boas pr√°ticas**: Commits at√¥micos, mensagens descritivas
- ‚úÖ **Ferramentas**: GitHub, GitLab, Bitbucket

**Regra de ouro:** Commit **pequenos e frequentes** com **mensagens descritivas**, sempre **pull antes de push**, e use **branches** para features e hotfixes.

---

**√öltima Atualiza√ß√£o:** 2025-11-15  
**N√≠vel:** B√ÅSICO  
**Tempo Estimado:** 60 minutos
